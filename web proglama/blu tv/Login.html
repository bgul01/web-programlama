<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Giriş Yap</title>
</head>
<body style="background:linear-gradient(
    rgba(15, 2, 68, 0.75), 
    rgba(27, 8, 95, 0.750)
  ), url(img/loginPage.jpg)">

    <nav class="navbar navbar-lg navbar-light bg-transparent">


        <a class="navbar-brand" href="blutv.html">
            <img src="img/BluTV.png" width="120"  alt="">
          </a>





    </nav>

    <div class="container d-flex justify-content-center  " >

        

        <div class="card d-flex justify-content-center bg-transparent" style="width: 350;">
            
            <h4  style="text-align: center; font-family: Arial, Helvetica, sans-serif;" class="card-title mt-5 text-white">Üye Girişi</h4>
            <input  id="email" type="email" class="form-control mt-2" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
            
<a  style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;" class="card-text text-end text-primary mt-2">E-postamı  Unuttum</a>
            
            <input id="password"  type="password" class="form-control mt-2" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
            <a style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;" class="card-text text-end text-primary mt-2">Şifremi Unuttum</a>
            <button id="submitData" name="submitData" class="btn btn-primary w-100 form-control">Giriş Yap</button>
            
        <div style="text-align:center;" class="card-footer">
        
         <p >Ya da</p>
        
        
        
        
        
        </div>


          </div>


    </div>
</div>





















<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword,signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-auth.js";
    import { getDatabase,set,ref,update } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js";
   
  
    
    const firebaseConfig = {
      apiKey: "AIzaSyCXK76Z5jpWxwCDLf1-mN7dpNntGdnGKz4",
      authDomain: "javascript-blu.firebaseapp.com",
      projectId: "javascript-blu",
      storageBucket: "javascript-blu.appspot.com",
      messagingSenderId: "580307309657",
      appId: "1:580307309657:web:8025f224453bf1fa71cd48",
      measurementId: "G-61K3D7BH2G"
    };
  
    
  
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth();
    const database = getDatabase(app);
  
  submitData.addEventListener('click',(e)=>{
  
    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value
 
  
  
    signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              
                const user = userCredential.user;
          
                var lgDate = new Date();
                update(ref(database, 'users/' + user.uid), {
                    last_login: lgDate,
                })
                    .then(() => {
                        // Data saved successfully!
                        alert('Giriş yapıldı');
                        window.location.href='home.html';

                    })
                    .catch((error) => {
                        // The write failed...
                        alert(error);
                    });
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                alert(errorMessage);
            });


  
  
    
  
  
  })
  
  
  </script>
  

</body>
</html>